<!DOCTYPE html>
<html lang="en">
<% var selectedIndex=0 %>
    <%- include('./components/head.ejs') %>
        <style>
            .image_preview {
                display: none;
                grid-template-columns: 1fr 1fr 1fr 1fr;
                gap: 10px;
                height: 100%;
                overflow-y: scroll;
                scrollbar-width: none;
                margin-top: 10px;
                grid-auto-rows: min-content;
            }

            .image_preview img {
                background-color: #d3d3d3d3;
                border-radius: 5px;
            }

            .img_container {
                position: relative;
                height: fit-content;
                overflow: hidden;
                cursor: pointer;
            }

            .img_container:hover .img_delete {
                top: 5px;
            }

            .sub_prev {
                width: 100%;
                aspect-ratio: 1;
                object-fit: cover;
            }

            .row_cont {
                position: relative;
                background-color: aqua;
            }

            .img_delete,
            .delete_prop {
                overflow: hidden;
                cursor: pointer;
                position: absolute;
                width: 25px;
                height: 25px;
                background-color: rgba(0, 0, 0, 0.507);
                border-radius: 50%;
                display: flex;
                justify-content: center;
                align-items: center;
                transition: 0.2s cubic-bezier(0.78, 0.91, 0.56, 1.59);
            }

            .img_delete {
                top: -25px;
                right: 5px;
            }

            .delete_prop {
                top: 10px;
            }

            .img_delete .icon {
                background-color: transparent;
            }

            label.file_select {
                padding: 12px 16px;
                font-size: 13px;
                font-weight: normal;
                border: 1px solid grey;
                color: grey;
                text-align: center;
                border-radius: 5px;
            }

            #input_file {
                display: none;
            }
            .add_product{
                display: none;
            }
        </style>

        <body>
            <div class="home flex">
                <nav>
                    <a href="" class="link">
                        <h1 class="web_title">TECHWISE</h1>
                    </a>
                    <hr color="#F8F8F8">
                    <%- include('./components/navDrawer.ejs', {index: 1}) %>
                </nav>
                <div class="content">
                    <%- include('./components/headerBar.ejs') %>

                        <%- include('./partials/addProduct.ejs')%>
                        <%- include('./partials/productList.ejs')  %>
                </div>
            </div>

            <div class="mobile_drawer_background" onclick="toggleDrawer()"></div>
            <div class="mobile_drawer">
                <%- include('./components/navDrawer.ejs', {index: 1}) %>
            </div>

            <div class="pop_up_background">
            </div>
            <div class="pop_up card">
                <form class="add_cart_form" action="">
                    <span class="material-symbols-outlined icon hover" onclick="togglePopup()">
                        close
                    </span>
                    <img id="cat_image_display" style="align-self: center; object-fit: cover;"
                        src="/illustrations/gallery.png" alt="image" width="100px" height="100px">
                    <br>
                    <label class="file_select hover" for="catImage">Add Category Image</label>
                    <input style="display: none;" type="file" accept="image/jpeg, image/jpg, image/png" maxlength="1"
                        name="" id="catImage" required>
                    <br>
                    <label style="align-self: self-start;" for="categoryInput">Category Name</label>
                    <input type="text" name="" id="categoryInput" required placeholder="Enter new category here">
                    <br>
                    <input class="custom_btn" type="submit" value="Add Category">
                </form>
            </div>
            <style>
                .pop_up_background {
                    position: absolute;
                    top: 0;
                    background-color: black;
                    opacity: 0;
                    visibility: hidden;
                    height: 100dvh;
                    width: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    transition: 0.2s ease-in;
                }

                .pop_up {
                    visibility: hidden;
                    width: 250px;
                    scale: 0;
                    overflow: hidden;
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    padding: 15px;
                    transform: translate(-50%, -50%);
                    transition: 0.2s ease-in;
                }

                .add_cart_form {
                    display: flex;
                    flex-direction: column;
                    align-items: stretch;
                    position: relative;
                }

                .add_cart_form span {
                    position: absolute;
                    top: 0;
                    right: 0;
                }

                .pop_up_background.active {
                    visibility: visible;
                    opacity: 50%;
                }

                .pop_up.active {
                    visibility: visible;
                    scale: 1;
                }
            </style>
            <script>
                const categoryImageSelector = document.getElementById('catImage');
                const categoryImageDisplay = document.getElementById('cat_image_display');

                categoryImageSelector.onchange = function () {
                    const files = categoryImageSelector.files;
                    if (files) {
                        const url = URL.createObjectURL(files[0]);
                        categoryImageDisplay.src = url;
                    }
                }

                function showAddProductSection(show){
                    const addProduct = document.querySelector('.add_product');
                    const productList = document.querySelector('.product_list');
                    if(show){
                        addProduct.style.display = 'block';
                        productList.style.display = 'none';
                    } else {
                        addProduct.style.display = 'none';
                        productList.style.display = 'block';
                    }
                }
            </script>

        </body>

</html>